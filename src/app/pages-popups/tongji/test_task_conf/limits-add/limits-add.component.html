<nb-card style="width: 900px; height: 680px;">
    <nb-card-header>
        <div class="row">
          <div class="col-md-4">新增试验任务信息</div>
            <div class="col-md-6"></div>
            <div class="col-md-2" style="text-align: right;">
                <nb-icon icon="close-outline" style="cursor: pointer;" (click)="closedialog()"></nb-icon>
            </div>
        </div>
    </nb-card-header>


    <nb-card-body>
        <!-- 试验任务信息 -->
        <div class="row">
            <div class="col-lg-3 test_task_info_title" >
                <span>试验任务信息：</span>
            </div>
            <div class="col-lg-9" >
            </div>
        </div>

        <form class="layui-form" action="" lay-filter="test_task_info">

            <!-- 设备编号，根据选的 设备名称自动填充  这个是eim系统自带的-->
            <!-- <ngx-group-devices #groups_devices (device_info)="device_info($event)"></ngx-group-devices> -->
            

            <div class="layui-form-item">
                <div class="layui-inline test_task_info_left">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">试验任务编号：</label>
                  <div class="layui-input-block" style="margin-left: 120px;">
                    <input disabled type="text" name="tasknum"  lay-verify="required|tasknum" placeholder="WTxxxx-yyyymm" autocomplete="off" class="layui-input mouse_forbid">
                  </div>
                </div>

                <div class="layui-inline test_task_info_right">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">试验名称：</label>
                  <div class="layui-input-block"  style="margin-left: 120px;">
                    <input style=" width: 95%;" disabled type="text" name="devicetaskname"  lay-verify="required|devicetaskname" placeholder="" autocomplete="off" class="layui-input mouse_forbid">
                  </div>
                </div>

                <div class="layui-inline test_task_info_right" style="display: none;">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">样件编号：</label>
                  <div class="layui-input-block" style="margin-left: 120px;">
                    <input disabled type="text" name="exemplarno"  lay-verify="required|exemplarno" placeholder="YPxxxx-yyyymm" autocomplete="off" class="layui-input">
                  </div>
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-inline test_task_info_left">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">试验条目编号：</label>
                  <div class="layui-input-block" style="margin-left: 120px;">
                    <input disabled type="text" name="taskitemnumbers"  lay-verify="required|taskitemnumbers" placeholder="请输入试验条目编号(xxx)" autocomplete="off" class="layui-input mouse_forbid">
                  </div>
                </div>

                <div class="layui-inline test_task_info_left">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">试验执行人：</label>
                  <div class="layui-input-block"  style="margin-left: 120px;">
                    <input style=" width: 104%;" type="text" name="executor"  lay-verify="required|executor" placeholder="" autocomplete="off" class="layui-input">
                  </div>
                </div>
                
            </div>

            <!-- 关联设备信息 -->
            <div class="row">
              <div class="col-lg-3 test_task_info_title" >
                  <span>关联设备信息：</span>
              </div>
              <div class="col-lg-9" >
              </div>
            </div>

            <ngx-limits-group-device #limits_groups_devices *ngIf="limitd.device_name_no[0].id" (device_info)="device_info($event)"></ngx-limits-group-device>
            
            <!-- 科室--设备名称--设备编号的 -->
            <div class="layui-form-item" *ngIf="!limitd.device_name_no[0].id" style="margin-bottom: -4px;">
                <div class="layui-inline" style="width: 35%;">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">功能组：</label>
                  <div class="layui-input-block" style="margin-left: 85px;">
                    <input disabled type="text" name="groups"  lay-verify="required|groups" placeholder="功能组" autocomplete="off" class="layui-input" style="width: 100%;">
                  </div>
                </div>

                <div class="layui-inline" style="width: 31%;">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">设备名称：</label>
                  <div class="layui-input-block" style="margin-left: 87px;">
                    <input disabled type="text" name="devicename"  lay-verify="required|devicename" placeholder="设备名称" autocomplete="off" class="layui-input" style="width: 100%;">
                  </div>
                </div>
                <div class="layui-inline" style="width: 30%;">
                  <label class="layui-form-label mylabel mulu_title" style="width: auto;">设备编号：</label>
                  <div class="layui-input-block" style="margin-left: 87px;">
                    <input disabled type="text" name="deviceno"  lay-verify="required|deviceno" placeholder="设备编号" autocomplete="off" class="layui-input" style="width: 100%;">
                  </div>
                </div>
            </div>



            <!-- 关联样件信息 -->
            <div class="row">
              <div class="col-lg-3 test_task_info_title" >
                  <span>关联样件信息：</span>
              </div>
              <div class="col-lg-9" >
              </div>
            </div>

            <!-- 功能组 下拉 -->
            <!-- 设备名称 下拉 -->
            <!-- 设备编号，根据选的 设备名称自动填充 -->
            <!-- <ngx-group-devices #groups_devices></ngx-group-devices> -->

            <div class="layui-form-item" style="margin-bottom: 0px;">
              <div class="layui-inline" style="width: 88%;">
                <ngx-exemplar-no-name #exemplar_no_name></ngx-exemplar-no-name>
              </div>
              <div class="layui-inline">
                <button type="submit" class="add layui-btn" lay-submit="" lay-filter="add">新增</button>
              </div>
            </div>
        </form>


        
        <!-- 当前输入试验信息预览 -->
        <div class="row" style="margin-top: 0px;">
            <div class="col-lg-3 test_task_info_title" >
                <span>当前输入试验信息预览：</span>
            </div>
            <div class="col-lg-9" >
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <label class="layui-form-label mylabel ">试验编号：</label>
                <div class="yulan_span" >{{previewinfodata.taskchildnum}}</div>
            </div>
            <div class="col-md-6">
                <label class="layui-form-label mylabel">设备编号：</label>
                <div class="yulan_span ">{{previewinfodata.devicenum}}</div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="layui-form-label mylabel ">试验名称：</label>
                <div class="yulan_span ">{{previewinfodata.devicetaskname}}</div>
            </div>
            <div class="col-md-4">
                <label class="layui-form-label mylabel ">设备名称：</label>
                <div class="yulan_span ">{{previewinfodata.devicename}}</div>
            </div>
            <div class="col-md-4">
                <label class="layui-form-label mylabel ">执行人：</label>
                <div class="yulan_span ">{{previewinfodata.executor}}</div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-12">
                <label class="layui-form-label mylabel ">样件信息：</label>
                <div class="exemplar yulan">
                  <span style="display: block;font-size: smaller;" *ngFor= "let item of explarinfo_list">{{item}}</span>
                </div>
            </div>
        </div>

        <!-- button 取消、确定 -->
        <div class="layui-form-item">
            <div class="layui-row" style="text-align: end;">
                <div class="layui-inline">
                  <div class="layui-input-inline">
                  </div>
                </div>
                <div class="layui-inline">
                  <div class="layui-input-inline">
                      <button type="button" class="submit_cancel layui-btn layui-btn-primary" (click)="cancel()">取消</button>
                      <button type="submit" class="submit_confirm layui-btn" lay-submit="" lay-filter="confirm" >确定</button>
                  </div>
                </div>
            </div>
        </div>
    </nb-card-body>
</nb-card>